% !TEX root = ../vr_st.tex

\section{Persistent cohomology operations}\label{s:steenrod}

%\subsection{$K(\pi, n)$ spaces and cohomology operations}

%We review classical material as presented, for example, in \cite{mosheroperations1968}.
%To be consistent with the existing literature we let $\pi$ be an abelian group.
%, not to be confused with homotopy groups denoted $\pi_n$ for $n \geq 0$.
%For the applications of the ideas in this subsection the persistence context $\pi$ will be assumed to be a field.

\input{sec/static_operations}

\subsection{Persistent $\theta$-modules}

\subsubsection{}

A cohomology operation $\theta \in \cO(\kk,m; \kk,n)$ is said to be \defn{linear}, if $\k$ is a field and the map $\theta_{\cX} \colon \rH^m(\cX; \k) \to \rH^n(\cX; \k)$ is linear for any topological space $\cX$.
We denote this subset of cohomology operations by $\cO(m,n;\k)$.
For any prime $p$, the field $\Z/p$ is additively generated, so all cohomology operations in $\cA_p$ are linear.\footnote{An example of an additive map that is not linear is complex conjugation $\bC \to \bC$.}

A linear cohomology operation defines a natural morphism of persistence modules $\theta_X \colon \rH^n(X; \k) \to \rH^m(X; \k)$ for any $\R$-space $X$.
The \defn{image} and \defn{kernel} of $\theta$, denoted $\img\theta$ and $\ker\theta$ respectively, are natural persistence modules defined for any $\R$-space $X$ by
\begin{align*}
	\img(\theta_X)_r &= \img((\theta_X)_r)\,, &
	\ker(\theta_X)_r &= \ker((\theta_X)_r)\,, \\
	\img(\theta_X)_{s,t} &= \rH^n(X;\k)_{s,t}\big|_{\img(\theta_s)}\,, &
	\ker(\theta_X)_{s,t} &= \rH^m(X;\k)_{s,t}\big|_{\ker(\theta_s)}\,.
\end{align*}

If $\rH(X;\k)$ is q-tame, the structure maps of $\img\theta$ and $\ker\theta$ are restrictions of the structure maps of a q-tame module, therefore $\img(\theta_X)$ and $\ker(\theta_X)$ are q-tame.
In this case we refer to their barcodes as $\theta$-barcodes.
Barcodes of cohomology operations generalize cohomology barcodes since, for the identity and zero maps in $\cO(n,n;\k)$, we have $\img\id_X \cong \ker0_X \cong \rH^n(X;\k)$.

\input{sec/stability}

\subsection{Sums and products}

\subsubsection{}
The \defn{wedge sum} $\cX \vee \cY$ of two pointed spaces is the quotient of their disjoint union by the identification of basepoints.
Given two base point preserving maps $f \colon \cX_1 \to \cX_2$ and $g \colon \cY_1 \to \cY_2$ the map $(f \vee g) \colon \cX_1 \vee \cY_1 \to \cX_2 \vee \cY_2$ is defined by
\[
(f \vee g)(z) =
\begin{cases}
	f(z) & z \in \cX_1, \\
	g(z) & z \in \cY_1.\\
\end{cases}
\]
For any two pointed $\R$-spaces $X$ and $Y$, the pointed $\R$-space $X \vee Y$, is defined by
\[
(X \vee Y)_r = X_r \vee Y_r \quad\text{and}\quad (X \vee Y)_{s,t} = (X_{s,y} \vee Y_{s,t}).
\]

\medskip\theorem
Let $X$ and $Y$ be pointed cellular $\R$-spaces.
For any linear cohomology operation $\theta$:
\begin{align*}
	\img\theta_{X \vee Y} &\cong \img\theta_X \oplus \img\theta_Y, \\
	\ker\theta_{X \vee Y} &\cong \ker\theta_X \oplus \ker\theta_Y.
\end{align*}

\begin{proof}
	The inclusions $X \xra{\iota_X} X \vee Y \xla{\iota_Y} Y$ induce an isomorphism $(\iota^*_X \oplus \iota^*_Y) \colon \rH(X \vee Y) \to \rH(X) \oplus \rH(Y)$ (\cite[Corollary 2.25.]{hatcher2000}).
	By the naturality of $\theta$ we have that $\theta_{X \vee Y} \circ (\iota^*_X \oplus \iota^*_Y) = (\iota^*_X \circ \theta_X) \oplus (\iota^*_Y \circ \theta_Y)$.
	So, $\img\theta_{X \vee Y} \cong \img\theta_X \oplus \img\theta_Y$ and $\ker\theta_{X \vee Y} \cong \ker\theta_X \oplus \ker\theta_Y$.
\end{proof}

\subsubsection{}\label{ss:wedge sum}

The \defn{gluing metric} on the wedge sum of pointed metric spaces ${(\cX_i, x_i)}_{i = 0}^k$ is defined as follows: For $x \in \cX_i$ and $x' \in \cX_j$, let
\[
d(x, x') =
\begin{cases}
	d_{\cX_i}(x, x_i) + d_{\cX_j}(x', x_j) & i \neq j, \\
	\hfil d_{\cX_i}(x, x') & i = j.
\end{cases}
\]
%if $i \neq j$, and 
%\[
%d(x, x') = d_{\cX_i}(x, x')
%\]
%if $i =j$,

Recall from \cite[Proposition 1]{adamaszek2020homotopy} that the Vietoris--Rips complex of a metric gluing is homotopy equivalent to the wedge sum of the Vietoris--Rips complexes.
Explicitly, that the natural inclusions
\[
\VR_r\cX \vee \VR_r\cY \to \VR_R(\cX \vee \cY)
\]
is a homotopy equivalence for each $r \in \R$.
From this we deduce the following.

\medskip\corollary
For $\cX$ and $\cY$ be pointed metric spaces,
\begin{align*}
	\img\theta_{(\VR X \, \vee \, \VR Y)} &\cong \, \img\theta_{\VR X} \oplus \img\theta_{\VR Y}, \\
	\ker\theta_{(\VR X \, \vee \, \VR Y)} &\cong \, \ker\theta_{\VR X} \oplus \ker\theta_{\VR Y}.
\end{align*}

\subsubsection{}

Similarly, for any two $\R$-spaces $X$ and $Y$, the $\R$-space $X \times Y$, is defined by
\[
(X \times Y)_r = X_r \times Y_r \quad\text{and}\quad (X \times Y)_{s,t} = (X_{s,y} \times Y_{s,t}).
\]

\theorem
Let $X$ and $Y$ be pointed cellular $\R$-spaces.
For any $k \in \N$, the Steenrod persistence modules satisfy:
\begin{align*}
	\img\Sq^k_{X \times Y} &\cong\, \img\sum_{\mathclap{i+j=k}} \Sq^i_X \ot \Sq^j_Y\,, & \ker\Sq^k_{X \times Y} &\cong\, \ker\sum_{\mathclap{i+j=k}} \Sq^i_X \ot \Sq^j_Y\,, \\
	\img\rP^k_{X \times Y} &\cong\, \img\sum_{\mathclap{i+j=s}} \rP^i_X \otimes \rP^j_Y\,, & 
	\ker\rP^k_{X \times Y} &\cong\, \ker\sum_{\mathclap{i+j=s}} \rP^i_X \otimes \rP^j_Y\,. &
\end{align*}

\begin{proof}
	By the K\"unneth formula with field coefficients, the projections $X \xla{} X \times Y \xra{} Y$ induce an isomorphism $\rH^*(X) \otimes \rH^*(Y) \to \rH^*(X \times Y)$.
	This isomorphism makes the exterior Cartan formula natural, which proves the statement.
\end{proof}

\subsubsection{}

Given two metric spaces $\cX$ and $\cY$.
The $\ell^\infty$ metric on $\cX \times \cY$ is defined by
\[
d(x \times y, \, x' \times y') = \max\set{d(x,x'), d(y,y')}.
\]
with this metric we have the following.

\medskip\corollary
Steenrod persistence modules satisfy:
\begin{align*}
	\img\Sq^k_{\VR X \times \VR Y} &\cong\, \img\sum_{\mathclap{i+j=k}} \Sq^i_{\VR X} \ot \Sq^j_{\VR Y}\,, \\ \ker\Sq^k_{\VR X \times \VR Y} &\cong\, \ker\sum_{\mathclap{i+j=k}} \Sq^i_{\VR X} \ot \Sq^j_{\VR Y}\,, \\
	\img\rP^k_{\VR X \times \VR Y} &\cong\, \img\sum_{\mathclap{i+j=s}} \rP^i_{\VR X} \otimes \rP^j_{\VR Y}\,, \\ 
	\ker\rP^k_{\VR X \times \VR Y} &\cong\, \ker\sum_{\mathclap{i+j=s}} \rP^i_{\VR X} \otimes \rP^j_{\VR Y}\,,
\end{align*}
for any $k \in \N$.

\begin{proof}
	This follows from the proof of \cite[Theorem~6.1(1)]{lim2020vietoris}, which constructs a natural isomorphism $\rH(\VR\cX) \otimes \rH(\VR\cY) \cong \rH(\VR(\cX \times \cY))$.
\end{proof}